<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Admin — Venus Lealtad</title>
  <link rel="stylesheet" href="/styles.css">
  <style>
    .wrap{max-width:1000px;margin:24px auto;padding:16px}
    .panel{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px;margin-bottom:16px}
    .row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid #eee;text-align:left;font-size:14px}
    th{background:#fafafa}
    .right{display:flex;justify-content:flex-end}
    .muted{color:#6b7280}
    .err{color:#b91c1c}
    .ok{color:#15803d}
    input{padding:10px;border:1px solid #e5e7eb;border-radius:10px;width:100%}
    .btn{background:#8c9668;border:0;color:#fff;border-radius:10px;padding:10px 14px;cursor:pointer}
    .btn.ghost{background:#fff;color:#8c9668;border:1px solid #8c9668}
    .hidden{display:none!important}
  </style>
</head>
<body>
  <main class="wrap">
    <header class="row" style="justify-content:space-between;margin-bottom:12px">
      <div class="row">
        <img src="/assets/logo.png" style="width:40px;height:40px;border-radius:10px" alt="">
        <div>
          <h1 style="margin:0">Panel Admin — Venus Lealtad</h1>
          <div class="muted">Gestiona cuentas, tarjetas y eventos</div>
        </div>
      </div>
      <div class="row">
        <a class="btn ghost" href="/" target="_blank" rel="noopener">Página clientes</a>
        <a class="btn ghost" href="/staff.html" target="_blank" rel="noopener">Página staff</a>
      </div>
    </header>

    <!-- VISTA AUTH -->
    <section id="view-auth" class="panel">
      <h2>Acceso</h2>
      <p class="muted">Inicia sesión o regístrate (si está permitido).</p>
      <div class="grid2">
        <form id="form-login">
          <h3>Iniciar sesión</h3>
          <label>Email<input id="login-email" type="email" required></label>
          <label>Contraseña<input id="login-pass" type="password" required></label>
          <div class="right"><button class="btn" type="submit">Entrar</button></div>
          <div id="login-out" class="muted"></div>
        </form>
        <form id="form-register">
          <h3>Registrarse</h3>
          <label>Email<input id="reg-email" type="email" required></label>
          <label>Contraseña<input id="reg-pass" type="password" required minlength="6"></label>
          <div class="right"><button class="btn" type="submit">Crear cuenta</button></div>
          <div id="reg-out" class="muted"></div>
          <small class="muted">Nota: el registro puede estar limitado por configuración del servidor.</small>
        </form>
      </div>
    </section>

    <!-- VISTA DASH -->
    <section id="view-dash" class="panel hidden">
      <div class="row" style="justify-content:space-between">
        <div>
          <h2 style="margin:0">Dashboard</h2>
          <div class="muted" id="me-line">Conectando…</div>
        </div>
        <button id="logout" class="btn ghost">Cerrar sesión</button>
      </div>

      <h3>Tarjetas</h3>
      <div class="row" style="gap:6px;margin-bottom:8px">
        <input id="q" placeholder="Buscar por ID o nombre…" style="max-width:360px">
        <button id="reload" class="btn ghost">Recargar</button>
      </div>
      <div class="panel">
        <table>
          <thead>
            <tr><th>ID</th><th>Cliente</th><th>Sellos</th><th>Max</th><th>Status</th><th>Creada</th></tr>
          </thead>
          <tbody id="cards-tbody"></tbody>
        </table>
        <div class="row" style="justify-content:space-between;margin-top:8px">
          <button id="prev" class="btn ghost">Anterior</button>
          <div class="muted" id="pageinfo"></div>
          <button id="next" class="btn ghost">Siguiente</button>
        </div>
      </div>

      <h3>Eventos de una tarjeta</h3>
      <div class="row" style="gap:6px;margin-bottom:8px">
        <input id="eid" placeholder="card_...">
        <button id="eload" class="btn">Ver eventos</button>
      </div>
      <div class="panel">
        <table>
          <thead>
            <tr><th>#</th><th>Tipo</th><th>Meta</th><th>Fecha</th></tr>
          </thead>
          <tbody id="events-tbody"></tbody>
        </table>
      </div>
    </section>
  </main>

  <script src="/admin.js"></script>
</body>
</html>